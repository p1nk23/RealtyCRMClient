<Window x:Class="RealtyCRMClient.ContractsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Договоры" Height="600" Width="1000">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- Панель с кнопками -->
            <RowDefinition Height="Auto"/>
            <!-- Заголовок -->
            <RowDefinition Height="*"/>
            <!-- Таблица договоров -->
        </Grid.RowDefinitions>


        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,10">
            <Button Content="Создать договор" 
            Command="{Binding CreateContractCommand}" 
            Width="150" 
            Margin="0,0,10,0"
            HorizontalAlignment="Left"/>

            <Button Content="Обновить" 
            Command="{Binding RefreshCommand}" 
            Width="100" 
            Margin="0,0,10,0"
            HorizontalAlignment="Left"/>

            <Button Content="Фильтр" 
            Command="{Binding ApplyFilterCommand}" 
            Width="120"
            HorizontalAlignment="Left"/>
        </StackPanel>
        
        <!-- Заголовок -->
        <TextBlock Text="Список договоров" FontSize="18" FontWeight="Bold" Grid.Row="1" Margin="0,0,0,10"/>

        <!-- Таблица договоров -->
        <DataGrid ItemsSource="{Binding Contracts}" 
                  SelectedItem="{Binding SelectedContract}"
                  AutoGenerateColumns="False"
                  Grid.Row="2"
                  CanUserAddRows="False"
                  MouseDoubleClick="OpenEditWindow">
            <DataGrid.Columns>
                <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50"/>
                <DataGridTextColumn Header="Клиент" Binding="{Binding Client.Name}" Width="150"/>
                <DataGridTextColumn Header="Агент" Binding="{Binding Agent.Name}" Width="150"/>
                <DataGridTextColumn Header="Объект" Binding="{Binding CardObjectRielty.Address}" Width="250"/>
                <DataGridTextColumn Header="Цена" Binding="{Binding CardObjectRielty.Price}" Width="100"/>
                <DataGridTextColumn Header="Дата начала" Binding="{Binding StartDate, StringFormat={}\{0:dd.MM.yyyy\}}" Width="100"/>
                <DataGridTextColumn Header="Статус" Binding="{Binding Status}" Width="100"/>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</Window>
